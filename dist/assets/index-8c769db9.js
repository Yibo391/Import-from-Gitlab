(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function t(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerpolicy&&(i.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?i.credentials="include":s.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(s){if(s.ep)return;s.ep=!0;const i=t(s);fetch(s.href,i)}})();const S=document.createElement("template");S.innerHTML=`
  <div id='window'>
    <div id='titlebar'>
      <img>
      <span id='title'>Placeholder title</span>
      <span id='buttons'>
        <span class='windowButton' id='maximizeButton'> &#9744; </span>
        <span class='windowButton' id='closeButton'> X </span>
      </span>
    </div>

    <div id='content'>
      <span id='resizeBars'>
        <span class='right' id='ew-resizer'>&nbsp;</span>
        <span id='ns-resizer'>&nbsp;</span>
        <span id='ne-resizer'>&nbsp;</span>
      </span>
    </div>
  </div>
  `;const T=document.createElement("template");T.innerHTML=`
  <link rel='stylesheet' type='text/css' href='../css/window.css' />
  `;class U extends window.HTMLElement{constructor(){super(),this.attachShadow({mode:"open"}),this._prevWindowState=void 0,this._isMaximized=!1,this._blockToggleMaximizeWindow=!1}_handleWindowEvent(e,t){const n=this.appWindow.querySelector("#titlebar"),s=this.shadowRoot.querySelector("#closeButton"),i=this.shadowRoot.querySelector("#maximizeButton"),o=this.appWindow.querySelector("#resizeBars");switch(e){case"move":n.addEventListener("mousedown",t);break;case"maximize":n.addEventListener("dblclick",t),i.addEventListener("click",t);break;case"close":s.addEventListener("click",t);break;case"resize":o.addEventListener("mousedown",t);break}}connectedCallback(){this.shadowRoot.appendChild(T.content.cloneNode(!0)),this.shadowRoot.appendChild(S.content.cloneNode(!0)),this._appContent=this.shadowRoot.querySelector("#content"),this.appWindow=this.shadowRoot.querySelector("#window"),this._handleWindowEvent("move",e=>this._moveWindow(e)),this._handleWindowEvent("maximize",()=>this.toggleMaximizeWindow()),this._handleWindowEvent("close",()=>this._closeWindow()),this._handleWindowEvent("resize",e=>this.resizeW(e))}_moveWindow(e){if(e.preventDefault(),e.target.parentElement.id==="buttons")return;let t,n,s,i;n=e.clientX,i=e.clientY;const o=a=>r(a);window.addEventListener("mousemove",o);const c=()=>{window.removeEventListener("mousemove",o),window.removeEventListener("mouseup",c)};window.addEventListener("mouseup",c);const d=this.shadowRoot.querySelector("#window"),r=a=>{this._isMaximized&&(this.toggleMaximizeWindow(!1),this._blockToggleMaximizeWindow=!0),t=n-a.clientX,s=i-a.clientY,n=a.clientX,i=a.clientY,d.style.top=Math.min(window.innerHeight-80,Math.max(0,d.offsetTop-s))+"px",d.style.left=d.offsetLeft-t+"px"}}resizeW(e){let t;e.target.id==="ne-resizer"?t=o=>i(o,"bottom right"):e.target.id==="ns-resizer"?t=o=>i(o,"bottom"):t=o=>i(o,"right"),window.addEventListener("mousemove",t);const n=()=>{window.removeEventListener("mousemove",t),window.removeEventListener("mouseup",n)};window.addEventListener("mouseup",n);const s=this.appWindow,i=(o,c)=>{this._isMaximized&&(this._isMaximized=!1),c.includes("right")&&(s.style.width=o.pageX-s.getBoundingClientRect().left+"px"),c.includes("bottom")&&(s.style.height=o.pageY-s.getBoundingClientRect().top+"px"),c.includes("left")&&(s.style.width=s.getBoundingClientRect().left-o.pageX+"px")}}toggleMaximizeWindow(e=!0){if(this._blockToggleMaximizeWindow){this._blockToggleMaximizeWindow=!1;return}if(this._isMaximized)window.onresize=void 0,e&&(this.appWindow.style.top=this._prevWindowState.top,this.appWindow.style.left=this._prevWindowState.left),this.appWindow.style.width=this._prevWindowState.width,this.appWindow.style.height=this._prevWindowState.height;else{this._prevWindowState={top:this.appWindow.style.top,left:this.appWindow.style.left,width:this.appWindow.style.width,height:this.appWindow.style.height};const t=()=>{this.appWindow.style.top="0px",this.appWindow.style.left="0px",this.appWindow.style.width=window.innerWidth+"px",this.appWindow.style.height=window.innerHeight-53+"px"};window.onresize=()=>t(),t()}this._isMaximized=!this._isMaximized}setApplication(e,t){this._app=e,this._appContent.appendChild(e),this.appWindow.querySelector("#titlebar").querySelector("img").setAttribute("src",t)}setTitle(e){this.shadowRoot.querySelector("#title").innerText=e}_closeWindow(){this.remove()}setOffsetPosition(e){this.appWindow.style.top=e+"px",this.appWindow.style.left=e+"px"}setFocus(e){this._app.dispatchEvent(new window.CustomEvent("windowgotfocus")),this.appWindow.style.setProperty("z-index",e),this.shadowRoot.querySelector("#titlebar").classList.add("focused")}unsetFocus(){this._app.dispatchEvent(new window.CustomEvent("windowlostfocus")),this.shadowRoot.querySelector("#titlebar").classList.remove("focused")}getCard(){return this.shadowRoot.querySelector("#card"+this._selectIndex)}}window.customElements.define("application-window",U);const b=1e3,x="memory-game",N="apps/"+x,w=N+"/images",W=document.createElement("template");W.innerHTML=`
  <link rel='stylesheet' href='${N}/css/memory-style.css'>
`;const R=document.createElement("template");R.innerHTML=`
  <form id='sizeForm'>
    Choose nr of cards: 
    <select id='nrOfCards'>
      <option>4</option>
      <option>6</option>
      <option>8</option>
      <option selected>12</option>
      <option>16</option>
    </select>
    <button type='submit'>Start game</button>
  </form>
`;const D=document.createElement("div");D.innerHTML=`
  Time: <span id='clock'>0</span>
  <span class='right'> Nr of moves made:
    <span id='moves'>0</span>
  </span>
`;class J extends window.HTMLElement{constructor(){super(),this.attachShadow({mode:"open"}),this.shadowRoot.appendChild(W.content.cloneNode(!0)),this.initializeVariables()}initializeVariables(){this._cards=[],this._openCards=[],this._blockAction=!1,this._nrOfMoves=0,this._selectIndex=0,this._clockInterval=void 0,this._movesCounter=void 0}connectedCallback(){this.resize()}restart(){this.clear(),this.resize()}resize(){this.shadowRoot.appendChild(R.content.cloneNode(!0));const e=this.shadowRoot.querySelector("#sizeForm");e.addEventListener("submit",t=>{t.preventDefault();const n=parseInt(e.querySelector("#nrOfCards").value);this.start(n)})}start(e){this.clear(),this.initializeVariables(),this._cols=e>6?4:e===6?3:2;const t=e<12?2:e===16?4:3;this._totalCards=e,this._cardsLeft=this._totalCards;const n=this._totalCards/2;for(let r=1;r<=n;r++)[...Array(2)].forEach(()=>{const a=this.createCardElement(r);this._cards.push(a)});this.shuffleCard();const s=document.createElement("table");s.className="cards";const i=document.createElement("tr"),o=document.createElement("td");this.shadowRoot.appendChild(s);let c=0;for(let r=0;r<t;r++){const a=i.cloneNode();s.appendChild(a),[...Array(this._cols)].forEach(()=>{const l=o.cloneNode();l.setAttribute("id","card"+c++),a.appendChild(l),l.appendChild(this._cards.pop())})}s.addEventListener("mousedown",r=>r.preventDefault()),s.addEventListener("click",r=>this.touchCard(r.target)),this.selectACard(0);const d=D.cloneNode(!0);this._movesCounter=d.querySelector("#moves"),this._startTime=new Date().getTime(),this._clockInterval=setInterval(()=>{this._timeTaken=((Date.now()-this._startTime)/1e3).toFixed(1),d.querySelector("#clock").textContent=this._timeTaken},100),this.shadowRoot.appendChild(d)}selectACard(e){const t=this._selectIndex+e;if(t<0||t>this._totalCards-1)return;this.getCard().classList.remove("selectedCard"),this._selectIndex=t,this.getCard().classList.add("selectedCard")}getCard(){return this.shadowRoot.querySelector("#card"+this._selectIndex)}touchCard(e){if(!(this._blockAction||!e.classList.contains("card")||e.getAttribute("data-enabled")==="false"||this.isOver())&&!this._openCards.includes(e)&&this._openCards.length<2&&(this._openCards.push(e),this._nrOfMoves++,this._movesCounter.textContent=this._nrOfMoves,this.revealCard(e),this._openCards.length===2)){const[n,s]=this._openCards;n.id===s.id?(this._blockAction=!0,this._cardsLeft-=2,this.isOver()&&clearInterval(this._clockInterval),setTimeout(()=>{this.removeCard(),this._openCards=[],this._blockAction=!1},b)):(this._blockAction=!0,setTimeout(()=>{this.hideCard(),this._blockAction=!1},b))}}checkGame(){if(this.isOver()){this.clear();const e=Math.pow(this._totalCards,1.5),t=this._totalCards*2;let n;if(this._timeTaken>60){const c=Math.floor(this._timeTaken/60),d=this._timeTaken%60;n=`${c}:${d<10?"0":""}${d.toFixed(0)} minutes`}else n=`${this._timeTaken} seconds`;const s=document.createElement("div"),i=this._timeTaken<e?"Great job, you":"You might not be the fastest, but you",o=this._nrOfMoves<t?"!":". Maybe a little forgetful?";s.innerText=`${i} completed the game in ${n} using ${this._nrOfMoves} moves${o}`,this.shadowRoot.appendChild(s.cloneNode(!0)),this.resize(),this.shadowRoot.querySelector("button").innerText="Play again"}}clear(){for(;this.shadowRoot.firstElementChild!==this.shadowRoot.lastElementChild;)this.shadowRoot.lastChild.remove()}isOver(){return this._cardsLeft===0}removeCard(){for(const e of this._openCards)this.discardCard(e);this.checkGame()}hideCard(){for(const e of this._openCards)this.concealCard(e);this._openCards.length=0}shuffleCard(){for(let e=this._cards.length-1;e>0;e--){const t=Math.floor(Math.random()*(e+1)),n=this._cards[e];this._cards[e]=this._cards[t],this._cards[t]=n}}createCardElement(e){console.log(1);const t=`${w}/0.png`,n=document.createElement("img");return n.id=e,n.classList.add("card"),n.setAttribute("src",t),this.setEnable(n,!0),n}revealCard(e){const t=`${w}/${e.id}.png`;e.setAttribute("src",t)}concealCard(e){const t=`${w}/0.png`;e.setAttribute("src",t)}discardCard(e){const t=`${w}/empty.png`;e.setAttribute("src",t),this.setEnable(e,!1)}setEnable(e,t){e.setAttribute("data-enabled",t)}}window.customElements.define(x,J);const G=document.createElement("template");G.innerHTML=`
  <form id='usernameForm'>
    <input id='username' type='text' autofocus autocomplete='off' placeholder='Type a username...'>
    <button type='submit'>Use</button> 
  </form>
`;const v=document.createElement("div");v.id="layout";v.className="disabled";v.innerHTML=`
  <div id='channels'>
    <h3>Channels</h3>
    <a href='#' class='selectedChannel' id='all'>All</a>
    <a href='#' id='general' title='General'># General</a>
    <a href='#' id='javascript' title='Javascript chat'># Javascript chat</a>
    <a href='#' id='other' title='Other'># Other</a>

    <div id='customChannels'>
    </div>
    <button id='newChannel'>+</button>
  </div>  

  <div id='chatMessageBox'>
  </div>
  
  <div id='userInputs'>
    <div id='notification'>Connecting to server...</div>
    
    <form id='chatForm'>
      <textarea id='chatInput'></textarea>
      <button type='submit' disabled>Send</button>
    </form>
  </div>
`;const X=document.createElement("template");X.innerHTML=`
  <a href='#' id=''>
    <span class='delete' id=''>x</span>
  </a>
`;const A=document.createElement("template");A.innerHTML=`
  <input id='channelName' type='text' autocomplete='off' placeholder='Channel name...'>
`;const q=document.createElement("div");q.className="msg";const z=document.createElement("p");z.className="emptyLine";const j="ws://localhost:8080/",k=1e3;class K{constructor(e){this._userName=e,this.socket=new window.WebSocket(j)}disconnect(){this.socket.close(k)}wasExpectedDisconnect(e){return e.code===k}isConnected(){return this.socket.readyState===window.WebSocket.OPEN}isDisconnected(){return this.socket.readyState===window.WebSocket.CLOSED}sendMessage(e,t){const n={type:"message",data:e,username:this._userName,channel:t};this.socket.send(JSON.stringify(n))}}const L="wang",E="yi",g="bo",f="all",Q=5e3,I="chat-app",Z="apps/"+I,O=document.createElement("template");O.innerHTML=`
  <link rel='stylesheet' href='${Z}/css/chat-style.css'>
`;class ee extends window.HTMLElement{constructor(){super(),this.attachShadow({mode:"open"}),this._activeReconnectInterval=void 0,this.shadowRoot.appendChild(O.content.cloneNode(!0))}connectedCallback(){const e=JSON.parse(window.localStorage.getItem(E));e&&e.push({empty:!0}),this._chatPosts=e||[],this._customChatChannels=JSON.parse(window.localStorage.getItem(g))||[],this._username=window.localStorage.getItem(L),this._username?this.renderPageLayout():this.render(),setTimeout(()=>{this.scroll()},1e3)}render(){const e=document.createElement("div");e.innerHTML=`
    <form id="usernameForm">
      <label for="username">Choose a username:</label>
      <input type="text" id="username" required>
      <button type="submit">Enter chat</button>
    </form>
  `;const t=e.querySelector("#usernameForm");t.addEventListener("submit",n=>{n.preventDefault(),this._username=t.querySelector("#username").value,window.localStorage.setItem(L,this._username),this.shadowRoot.removeChild(e),this.renderPageLayout()}),this.shadowRoot.appendChild(e)}renderPageLayout(){this.shadowRoot.appendChild(v.cloneNode(!0)),this._chatForm=this.shadowRoot.querySelector("#chatForm"),this._chatForm.addEventListener("submit",s=>this.sendM(s)),this._chatMessageBox=this.shadowRoot.querySelector("#chatMessageBox"),this._notification=this.shadowRoot.querySelector("#notification"),this._chatInput=this.shadowRoot.querySelector("#userInputs").querySelector("textarea"),this._chatInput.addEventListener("keydown",s=>{s.key==="Enter"&&!s.shiftKey&&(s.preventDefault(),this.sendM(s))}),console.log(this._chatInput);const e=this.shadowRoot.querySelector("#channels");this._reservedChannels=[];for(const s of e.querySelectorAll("a"))this._reservedChannels.push(s.id);const t=e.querySelector("#customChannels");this.renderPage(),this.connect(),this.setC(f),e.addEventListener("click",s=>{s.target.nodeName==="A"?this.setC(s.target.id):s.target.nodeName==="BUTTON"&&this.createC(s.target)});const n=s=>{(s.key==="Delete"||s.target.className==="delete")&&(this.deleteC(s.target.id),this.renderPage())};t.addEventListener("keydown",s=>n(s)),t.addEventListener("click",s=>n(s)),this.addEventListener("windowClosed",()=>{this._serverConnection.disconnect()})}renderPage(){const e=this.shadowRoot.querySelector("#customChannels");e.innerHTML="";for(const t of this._customChatChannels){const n=`
            <a id="${t}">
                # ${t}
                <button class="delete" id="${t}">x</button>
            </a>
        `;e.insertAdjacentHTML("beforeend",n)}this._currentChannel&&this.selectChannel(this._currentChannel)}connect(){this._serverConnection=new K(this._username),this._serverConnection.socket.addEventListener("open",()=>{console.log("WebSocket connection established."),this.connectionState(!0),this._activeReconnectInterval&&this._serverConnection.isConnected()&&clearInterval(this._activeReconnectInterval)}),this._serverConnection.socket.addEventListener("close",this._listener=e=>{console.log("WebSocket connection closed."),this.connectionState(!1),!(this._serverConnection.wasExpectedDisconnect(e)||this._activeReconnectInterval)&&(this._activeReconnectInterval=setInterval(()=>{this._serverConnection.isDisconnected()&&this.connect()},Q))}),this._serverConnection.socket.addEventListener("message",e=>{console.log("Message event listener triggered."),this.receiveM(e)})}receiveM(e){console.log("Received message:",e.data);const t=JSON.parse(e.data);if(console.log(t.type),t.type==="message"&&(t.date=new Date,this._chatPosts.push(t),window.localStorage.setItem(E,JSON.stringify(this._chatPosts)),!t.channel||t.channel===this._currentChannel)){const n=this.messageRedLine(t);this._chatMessageBox.appendChild(n),this.scroll(n)}}sendM(e){e.preventDefault(),this._serverConnection.sendMessage(this._chatInput.value,this._currentChannel),this._chatInput.value="",this._chatInput.focus(),this._serverConnection.socket.readyState===WebSocket.OPEN?console.log(1):console.log(2)}setC(e){if(e===this._currentChannel)return;this.selectChannel(e),this._currentChannel=e;const t=e===f?this._chatPosts:this._chatPosts.filter(s=>s.channel===e||s.empty);for(;this._chatMessageBox.lastChild;)this._chatMessageBox.lastChild.remove();let n;for(const s of t)(s.data||n&&n.className!=="emptyLine")&&(n=this.messageRedLine(s),this._chatMessageBox.appendChild(n));setTimeout(()=>{this.scroll()})}createC(){const e=this.shadowRoot.querySelector("#channels"),t=e.querySelector("button");t.remove(),e.appendChild(A.content.cloneNode(!0));const n=e.querySelector("input[type=text]");n.focus();const s=i=>{if(i.key==="Enter"){const o=n.value.trim();o.length>0&&!this._reservedChannels.find(c=>c.toLowerCase()===o.toLowerCase())&&!this._customChatChannels.find(c=>c.toLowerCase()===o.toLowerCase())&&(this._customChatChannels.push(o),window.localStorage.setItem(g,JSON.stringify(this._customChatChannels)),this.renderPage())}else if(i.target.nodeName==="INPUT"||i.key&&i.key!=="Escape")return;e.removeEventListener("click",s),document.removeEventListener("keydown",s),n.remove(),e.appendChild(t)};e.addEventListener("click",s),document.addEventListener("keydown",s)}deleteC(e){this._currentChannel===e&&this.setC(f);const t=this._customChatChannels.findIndex(n=>n===e);t!==-1&&(this._customChatChannels.splice(t,1),window.localStorage.setItem(g,JSON.stringify(this._customChatChannels)),this.renderPage())}selectChannel(e){const t=this.shadowRoot.querySelector("#channels"),n=t.querySelector("#"+this._currentChannel);n&&(n.className="");const s=t.querySelector("#"+e);s.className="selectedChannel"}connectionState(e){const t=this._chatForm.querySelector('button[type="submit"]');t.disabled=!e;const n=this.shadowRoot.querySelector("#layout"),s=this._notification,i=this._chatForm;e?(n.classList.remove("disabled"),this._chatInput.focus(),s.style.display="none",i.style.display="block"):(n.classList.add("disabled"),s.style.display="block",i.style.display="none",s.innerHTML="No connection to server<br>you are now viewing cached messages...")}messageRedLine(e){let t;if(!e.data)t=z.cloneNode();else{if(t=q.cloneNode(),e.date){const s=new Date(e.date).toLocaleTimeString().substr(0,5),i=document.createElement("span");i.title=new Date().toLocaleDateString(),i.className="time",i.innerText=s+" ",t.appendChild(i)}const n=document.createElement("span");n.className="sender",this._currentChannel===f&&(n.title=e.channel?"["+e.channel+"] ":"no channel"),n.innerText=e.username+": ",t.appendChild(n),t.appendChild(document.createTextNode(e.data))}return t}scroll(){this._chatMessageBox.scrollTo({top:this._chatMessageBox.scrollHeight,behavior:"smooth"})}}window.customElements.define(I,ee);const y=document.createElement("div");y.id="monthNav";y.innerHTML=`
  <div id='year'>
    <a id='prevYear' href='#'>&#8678;</a>
    <a id='yearTitle' class='middle' href='#'>Year</a>
    <a id='nextYear' href='#'>&#8680;</a>
  </div>
  <div id='month'>
    <a id='prevMonth' href='#'>&#8678;</a>
    <span id='monthTitle'>
      Month
    </span>
    <a id='nextMonth' href='#'>&#8680;</a>
  </div>
`;const te=document.createElement("template");te.innerHTML=`
  <div id='todayLink'>
    <a href='#' id='todayLink'>today</a>
  </div>
`;const P=document.createElement("template");P.innerHTML=`
    <a href='#' class='miniMonth'>
      <div id='monthName'></div>
    </a>
`;const M=["January","February","March","April","May","June","July","August","September","October","November","December"],se=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],F="calendar-app",H="/apps/"+F,Y=document.createElement("template");Y.innerHTML=`
  <link rel='stylesheet' href='${H}/css/calendar-style.css'>
`;const u={MonthView:"monthView",YearView:"yearView"};class ne extends window.HTMLElement{constructor(){super(),this.attachShadow({mode:"open"}),this._currentYear=new Date().getUTCFullYear(),this._currentMonth=new Date().getUTCMonth()}connectedCallback(){this.shadowRoot.appendChild(Y.content.cloneNode(!0)),this._renderYearView()}_renderYearView(){this._clearContent();const e=y.cloneNode(!0);e.id="yearNav",e.querySelector("#month").remove(),e.querySelector("#yearTitle").innerText=this._currentYear,this.shadowRoot.appendChild(e),this.naviListener(e,u.YearView);const t=document.createElement("div");t.className="flexContainer",this.shadowRoot.appendChild(t);for(let n=0;n<12;n++){this.shadowRoot.appendChild(P.content.cloneNode(!0));const s=this.shadowRoot.lastElementChild;s.addEventListener("click",()=>{this._currentMonth=n,this._renderMonthView(this._currentYear,n)});const i=s.querySelector("#monthName");i.innerText=M[n],s.appendChild(this._makeMonth(this._currentYear,n,!1)),t.appendChild(s)}this.shadowRoot.appendChild(this._makeTodayLink(u.YearView))}_renderMonthView(e=this._currentYear,t=this._currentMonth){this._clearContent();const n=y.cloneNode(!0);this.shadowRoot.appendChild(n),n.querySelector("#yearTitle").innerText=e,n.querySelector("#monthTitle").innerText=M[t],this.naviListener(n,u.MonthView),this.shadowRoot.appendChild(this._makeMonth(e,t)),this.shadowRoot.appendChild(this._makeTodayLink(u.MonthView))}_makeMonth(e=this._currentYear,t=this._currentMonth,n=!0){const s=document.createElement("table");if(s.id=n?"fullView":"miniView",n){const r=document.createElement("tr");s.appendChild(r);const a=se.slice(),l=a.shift();a.push(l),a.forEach(p=>{const m=document.createElement("td");m.innerText=p,r.appendChild(m)})}const i=new Date(e,t+1,0).getDate();let d=1-(new Date(e,t,1).getDay()+6)%7;for(let r=0;d<=i;r++){const a=document.createElement("tr");a.className="weekRow",s.appendChild(a);for(let l=0;l<7;l++){const p=document.createElement("td"),m=new Date(e,t,d);m.toDateString()===new Date().toDateString()?p.className="today":m.getMonth()!==t&&(p.className="notCurrentMonth"),p.innerText=m.getDate(),a.appendChild(p),d++}}return s}_clearContent(){this.shadowRoot.innerHTML='<link rel="stylesheet" href="'+H+'/css/calendar-style.css">'}_makeTodayLink(e){const t=document.createElement("a");t.href="#",t.innerText="Today",t.addEventListener("click",()=>{const s=new Date;this._currentYear=s.getUTCFullYear(),this._currentMonth=s.getUTCMonth(),this._clearContent(),this._renderYearView()});const n=document.createElement("div");return n.classList.add("todayLink"),n.appendChild(t),n}naviListener(e,t){const n={prevYear:()=>this._currentYear--,nextYear:()=>this._currentYear++,prevMonth:()=>this._currentMonth--,nextMonth:()=>this._currentMonth++,yearTitle:()=>this._renderYearView()};e.addEventListener("click",s=>{s.target.nodeName==="A"&&n[s.target.id]&&(n[s.target.id](),this._currentMonth<0?(this._currentMonth=11,this._currentYear--):this._currentMonth>11&&(this._currentMonth=0,this._currentYear++),t===u.MonthView?this._renderMonthView():t===u.YearView&&this._renderYearView())})}}window.customElements.define(F,ne);const C=document.createElement("img");C.className="icon";C.setAttribute("tabindex","0");const $=document.createElement("div");$.id="desktop";const B=document.createElement("div");B.id="bottombar";const V=document.createElement("template");V.innerHTML=`
  <link rel='stylesheet' type='text/css' href='../css/shell.css' />
`;const _="/apps",ie="icon.png",oe=10;class ae extends window.HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){this.setupElements(),this.registerEventListeners(),this.createAppShortcuts(),this.createDateTimeDisplay(),this.createDesktopIcons()}createDesktopIcons(){[{appName:"memory-game",titleName:"Memory",iconUrl:_+"/memory-game/icon.png"},{appName:"chat-app",titleName:"Chat",iconUrl:_+"/chat-app/icon.png"},{appName:"calendar-app",titleName:"Calendar",iconUrl:_+"/calendar-app/icon.png"}].forEach((t,n)=>{const s=C.cloneNode(!0);s.setAttribute("id",t.appName),s.setAttribute("src",t.iconUrl),s.setAttribute("title",t.titleName),s.classList.add("desktop-icon"),s.classList.add("desktop-icon-hover"),s.style.top=`${20+n*100}px`,this._desktop.appendChild(s),s.addEventListener("click",()=>this.openApplication(s))})}setupElements(){this.shadowRoot.appendChild(V.content),this.shadowRoot.appendChild($),this.shadowRoot.appendChild(B),this._desktop=this.shadowRoot.querySelector("#desktop"),this._bottombar=this.shadowRoot.querySelector("#bottombar")}registerEventListeners(){this._bottombar.addEventListener("click",e=>{e.target.classList.contains("icon")&&this.openApplication(e.target)})}createDateTimeDisplay(){this._dateTimeDisplay=document.createElement("div"),this._dateTimeDisplay.id="dateTimeDisplay",this._bottombar.appendChild(this._dateTimeDisplay),this.updateDateTime()}updateDateTime(){const e=new Date,t=e.getHours().toString().padStart(2,"0"),n=e.getMinutes().toString().padStart(2,"0"),s=e.toLocaleDateString();this._dateTimeDisplay.textContent=`${s} ${t}:${n}`,setTimeout(()=>this.updateDateTime(),1e3*60-e.getSeconds()*1e3)}createAppShortcuts(){[{appName:"memory-game",titleName:"Memory"},{appName:"chat-app",titleName:"Chat"},{appName:"calendar-app",titleName:"Calendar"}].forEach(t=>{const n=C.cloneNode(!0),s=_+"/"+t.appName+"/"+ie;n.setAttribute("id",t.appName),n.setAttribute("src",s),n.setAttribute("title",t.titleName),this._bottombar.appendChild(n)}),this._highestLayer=1}openApplication(e){const t=e.getAttribute("id"),n=e.getAttribute("title"),s=e.getAttribute("src"),i=document.createElement("application-window");this._desktop.appendChild(i),i.setApplication(document.createElement(t),s),i.setAttribute("nr",this._desktop.children.length),i.setTitle(n),i.setOffsetPosition((this._desktop.children.length-1)*oe),this.setFocusedWindow(i,!0),i.addEventListener("mousedown",()=>this.setFocusedWindow(i,!0))}closeFocusedWindow(){if(!this._focusedWindow)return;this._focusedWindow._closeWindow();let e,t=0;for(const n of this._desktop.children){const s=n.getLayer();s>t&&(t=s,e=n)}e?this.setFocusedWindow(e,!1):this._focusedWindow=void 0}maximizeWindow(){this._focusedWindow&&this._focusedWindow.toggleMaximizeWindow()}setFocusedWindow(e,t){this._focusedWindow!==e&&(this._focusedWindow&&this._focusedWindow.unsetFocus(),this._focusedWindow=e,e.setFocus(this._highestLayer),t&&this._highestLayer++)}}window.customElements.define("personal-web-desktop",ae);
